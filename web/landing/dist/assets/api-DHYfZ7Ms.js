import{r as p,j as e,G as Z,c as ee,R as te}from"./styles-DGJLjUaE.js";function se(){var T,$;const[t,s]=p.useState(null),[n,i]=p.useState(null),[r,c]=p.useState(""),[d,u]=p.useState(null),[f,m]=p.useState(!1);p.useEffect(()=>{fetch("/api/swagger.json").then(a=>a.ok?a.json():Promise.reject(a.statusText)).then(a=>s(a)).catch(a=>i(String(a)))},[]),p.useEffect(()=>{fetch("/api/undocumented.json").then(a=>a.ok?a.json():null).then(a=>a&&u(a)).catch(()=>{})},[]);const N=p.useMemo(()=>{var o;if(!(t!=null&&t.paths))return{};const a=[];for(const[h,v]of Object.entries(t.paths))for(const[b,w]of Object.entries(v)){const S=b.toUpperCase();if(!["GET","POST","PUT","PATCH","DELETE"].includes(S))continue;const E=Array.isArray(w.tags)?w.tags[0]:void 0;a.push({method:S,path:h,summary:w.summary||w.operationId,description:w.description,tag:E,meta:w})}const l={};for(const h of a){const v=h.tag||"General";l[v]||(l[v]=[]),l[v].push(h)}if((o=d==null?void 0:d.endpoints)!=null&&o.length){const h=b=>`${b.method}:${b.path}`,v=new Set(a.map(h));for(const b of d.endpoints){const w=h(b);if(v.has(w))continue;const S=b.tag||"Undocumented";l[S]||(l[S]=[]),l[S].push({...b,meta:{}})}}for(const h of Object.keys(l))l[h].sort((v,b)=>v.path.localeCompare(b.path));return l},[t,d]),x=p.useMemo(()=>{const a=Object.keys(N);if(!(t!=null&&t.tags))return a;const l=t.tags.map(o=>o.name);return[...l.filter(o=>a.includes(o)),...a.filter(o=>!l.includes(o))]},[t,N]);return e.jsxs("div",{className:"min-h-screen bg-white",children:[e.jsx("header",{className:"api-topbar",children:e.jsxs("div",{className:"container-narrow py-3 flex items-center justify-between gap-3",children:[e.jsxs("a",{href:"/",className:"flex items-center gap-2 select-none min-w-0",children:[e.jsx("span",{className:"logo-font-poiret text-lg text-gray-900",children:"Scriberr"}),e.jsx("span",{className:"text-gray-300",children:"/"}),e.jsx("span",{className:"text-sm text-gray-600",children:"API Reference"})]}),e.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:[e.jsx("input",{placeholder:"Search endpoints",value:r,onChange:a=>c(a.target.value),className:"w-full sm:w-56 rounded-md border border-gray-300 bg-white px-3 py-1.5 text-sm outline-none focus:ring-2 focus:ring-gray-300"}),e.jsx("button",{className:"sm:hidden inline-flex items-center justify-center rounded-md border border-gray-200 bg-white px-2.5 py-1.5 text-gray-700 hover:bg-gray-50",onClick:()=>m(a=>!a),"aria-label":"Toggle tags",children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",className:"size-5",children:e.jsx("path",{d:"M4 7h16M4 12h16M4 17h16"})})}),e.jsx("div",{className:"hidden md:block",children:e.jsx(Z,{})})]})]})}),e.jsxs("main",{className:"container-narrow py-10",children:[f&&e.jsxs("div",{className:"sm:hidden mb-4 border border-gray-200 rounded-lg p-3",children:[e.jsx("div",{className:"text-[11px] font-medium text-gray-500 mb-2",children:"Tags"}),e.jsx("ul",{className:"grid grid-cols-2 gap-2 text-sm",children:x.length>0?x.map(a=>e.jsx("li",{children:e.jsx("a",{href:`#tag-${encodeURIComponent(a)}`,className:"text-gray-700 hover:text-gray-900",onClick:()=>m(!1),children:a})},`m-${a}`)):e.jsx("li",{className:"text-gray-400",children:"Loading tags…"})})]}),n&&e.jsxs("p",{className:"text-red-600",children:["Failed to load: ",n]}),e.jsxs("div",{className:"mb-10",children:[e.jsx("h1",{className:"text-[28px] font-semibold tracking-tight text-gray-900",children:((T=t==null?void 0:t.info)==null?void 0:T.title)||"Scriberr API"}),e.jsxs("div",{className:"mt-1 text-sm text-gray-600",children:["Version ",(($=t==null?void 0:t.info)==null?void 0:$.version)||"1.0.0"]}),t&&e.jsx(re,{doc:t})]}),e.jsx(ne,{}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-[240px_minmax(0,1fr)] gap-8 mt-10",children:[e.jsx("aside",{className:"api-sidebar",children:e.jsxs("div",{className:"sticky top-24 pr-6",children:[e.jsx("div",{className:"text-[11px] font-medium text-gray-500 mb-2",children:"Tags"}),e.jsx("ul",{className:"space-y-2 text-sm min-h-[200px]",children:x.length>0?x.map(a=>e.jsx("li",{children:e.jsx("a",{href:`#tag-${encodeURIComponent(a)}`,className:"text-gray-600 hover:text-gray-900",children:a})},a)):e.jsx("li",{className:"text-gray-400",children:"Loading tags…"})})]})}),e.jsx("div",{children:e.jsx("section",{className:"space-y-12",children:t?x.map(a=>{const l=(N[a]||[]).filter(o=>{const h=r.trim().toLowerCase();return h?o.path.toLowerCase().includes(h)||o.method.toLowerCase().includes(h)||(o.summary||"").toLowerCase().includes(h)||(o.description||"").toLowerCase().includes(h):!0});return l.length?e.jsxs("div",{id:`tag-${a}`,children:[e.jsx("h2",{className:"text-base font-semibold mb-3 text-gray-900",children:a}),e.jsx("div",{className:"space-y-4",children:l.map(o=>e.jsx(ae,{ep:o,doc:t},`${o.method}-${o.path}`))})]},a):null}):e.jsx("div",{className:"text-gray-500",children:"Loading API…"})})})]})]})]})}function re({doc:t}){var r;const s=typeof window<"u"?window.location:{protocol:"http:",host:"localhost:8080"},n=t.basePath||"",i=t.openapi?Array.isArray(t.servers)&&((r=t.servers[0])==null?void 0:r.url)||`${s.protocol}//${s.host}`:`${s.protocol}//${t.host||s.host}${n}`;return e.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:["Base URL: ",e.jsx("code",{className:"text-gray-900",children:i})]})}function ne(){const s=`${typeof window<"u"?window.location.origin:"http://localhost:8080"}/api/v1`,n=["curl -X POST",`'${s}/auth/login'`,"-H 'Content-Type: application/json'",`-d '{"username":"alice","password":"your-password"}'`].join(" "),i=["curl -X GET",`'${s}/transcription/list'`,"-H 'Authorization: Bearer YOUR_JWT'"].join(" "),r=["curl -X GET",`'${s}/transcription/list'`,"-H 'X-API-Key: YOUR_API_KEY'"].join(" ");return e.jsx("section",{className:"container-narrow",children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("article",{className:"api-card",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Authentication"}),e.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:["Protected endpoints accept either a Bearer JWT in the ",e.jsx("code",{children:"Authorization"})," header or an API key via the ",e.jsx("code",{children:"X-API-Key"})," header. Some endpoints require JWT specifically (user account and LLM config)."]}),e.jsxs("ul",{className:"list-disc pl-5 text-sm text-gray-600 mt-2",children:[e.jsxs("li",{children:["JWT-only: ",e.jsx("code",{children:"/auth/change-password"}),", ",e.jsx("code",{children:"/auth/change-username"}),", ",e.jsx("code",{children:"/api-keys"}),", ",e.jsx("code",{children:"/llm/config"})]}),e.jsx("li",{children:"API key or JWT: transcription, chat, notes, summaries, summarize, admin"})]})]}),e.jsxs("article",{className:"api-card",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Get a JWT"}),e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Authenticate and use the token with the Authorization header."}),e.jsx("div",{className:"mt-3",children:e.jsx(B,{curl:n,js:I(n),wrap:!0})})]}),e.jsxs("article",{className:"api-card md:col-span-1",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Use JWT"}),e.jsx("div",{className:"mt-3",children:e.jsx(B,{curl:i,js:I(i),wrap:!0})})]}),e.jsxs("article",{className:"api-card md:col-span-1",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Use API Key"}),e.jsx("div",{className:"mt-3",children:e.jsx(B,{curl:r,js:I(r),wrap:!0})})]})]})})}function ae({ep:t,doc:s}){var S,E,J,M,q;const n=p.useMemo(()=>oe(`${t.method}-${t.path}`),[t.method,t.path]),[i,r]=p.useState(!1),[c,d]=p.useState(!1),[u,f]=p.useState(!1),m=Array.isArray((S=t.meta)==null?void 0:S.parameters)?t.meta.parameters:[],N=(E=t.meta)==null?void 0:E.requestBody,x=((J=t.meta)==null?void 0:J.responses)||{},T=p.useMemo(()=>{var R;const y=Array.isArray((R=t.meta)==null?void 0:R.security)?t.meta.security:[],A=[];for(const k of y)k&&typeof k=="object"&&A.push(...Object.keys(k));return[...new Set(A)]},[t.meta]),$=s.securityDefinitions||((M=s.components)==null?void 0:M.securitySchemes)||{},a=le(N,s)||de(t.meta),l=a&&Object.keys(a.content||{})[0],o=l?(q=a.content[l])==null?void 0:q.schema:void 0,h=o?O(o,s.components):void 0,v=T[0],b=ue(v,$),w=me(t.method,t.path,l,h,b,m);return e.jsxs("article",{id:n,className:"api-card",children:[e.jsx("button",{onClick:()=>r(y=>!y),className:"w-full text-left",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ie,{method:t.method}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("code",{className:"text-sm text-gray-900 truncate",children:t.path}),e.jsx("a",{href:`#${n}`,title:"Permalink",className:"ml-auto text-gray-400 hover:text-gray-700",children:"#"})]}),t.summary&&e.jsx("div",{className:"text-[13px] text-gray-600 mt-0.5 truncate",children:t.summary})]})]})}),i&&e.jsxs("div",{className:"pt-4",children:[t.description&&e.jsx("p",{className:"text-sm text-gray-600",children:t.description}),!!T.length&&e.jsxs("div",{className:"mt-3 text-xs text-gray-600 flex flex-wrap items-center gap-2",children:[e.jsx("span",{className:"text-gray-500",children:"Auth:"}),T.map(y=>e.jsx(pe,{name:y,def:$==null?void 0:$[y]},y))]}),!!m.length&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"api-section-title mb-2",children:"Parameters"}),e.jsx(ce,{params:c?m:m.slice(0,8)}),m.length>8&&e.jsx("button",{onClick:()=>d(y=>!y),className:"mt-2 text-xs text-gray-600 hover:text-gray-900",children:c?"Show less":`Show all ${m.length} parameters`})]}),o&&e.jsxs("div",{className:"mt-3",children:[e.jsxs("h4",{className:"api-section-title mb-2",children:["Request Body ",e.jsxs("span",{className:"text-gray-500",children:["(",l,")"]})]}),e.jsx(P,{text:L(h)})]}),x&&Object.keys(x).length>0&&e.jsxs("div",{className:"mt-3",children:[e.jsx("h4",{className:"api-section-title mb-2",children:"Response"}),(()=>{var W;const y=Object.entries(x),A=y.findIndex(([C])=>C==="200"),R=y[A>=0?A:0],k=y.filter((C,g)=>g!==(A>=0?A:0)),[D,j]=R,z=(j==null?void 0:j.content)||{},G=Object.keys(z)[0],H=G?(W=z[G])==null?void 0:W.schema:j==null?void 0:j.schema,V=H?O(H,s.components):(j==null?void 0:j.description)||"";return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"rounded-md border border-gray-200 p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-[11px] text-gray-600 mb-2",children:[e.jsxs("span",{className:"status-pill",children:["HTTP ",D]}),(j==null?void 0:j.description)&&e.jsx("span",{children:j.description})]}),e.jsx(P,{text:L(V)})]}),k.length>0&&e.jsx("button",{onClick:()=>f(C=>!C),className:"mt-2 text-xs text-gray-600 hover:text-gray-900",children:u?"Hide other responses":`Show ${k.length} more`}),u&&e.jsx("div",{className:"space-y-2 mt-2",children:k.map(([C,g])=>{var F;const K=(g==null?void 0:g.content)||{},_=Object.keys(K)[0],X=_?(F=K[_])==null?void 0:F.schema:g==null?void 0:g.schema,Q=X?O(X,s.components):(g==null?void 0:g.description)||"";return e.jsxs("div",{className:"rounded-md border border-gray-200 p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-[11px] text-gray-600 mb-2",children:[e.jsxs("span",{className:"status-pill",children:["HTTP ",C]}),(g==null?void 0:g.description)&&e.jsx("span",{children:g.description})]}),e.jsx(P,{text:L(Q)})]},C)})})]})})()]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("h4",{className:"api-section-title mb-2",children:"Examples"}),e.jsx(B,{curl:w,js:I(w)})]})]})]})}function P({text:t,wrap:s}){const n=typeof t=="string"?t:JSON.stringify(t,null,2),[i,r]=p.useState(!1);return e.jsxs("div",{className:"relative",children:[e.jsx("pre",{className:`codeblock ${s?"codeblock-wrap":""}`,children:e.jsx("code",{children:n})}),e.jsx("button",{onClick:()=>{navigator.clipboard.writeText(n).then(()=>{r(!0),setTimeout(()=>r(!1),1200)})},className:"absolute top-2 right-2 inline-flex items-center gap-2 rounded-md border border-gray-300 bg-white text-gray-700 px-2 py-1 text-[11px] hover:bg-gray-50",children:i?"Copied":"Copy"})]})}function B({curl:t,js:s,wrap:n}){const[i,r]=p.useState("curl");return e.jsxs("div",{children:[e.jsxs("div",{className:"mb-2 inline-flex rounded-md border border-gray-200 bg-white p-0.5 text-xs",children:[e.jsx("button",{onClick:()=>r("curl"),className:`px-2 py-1 rounded ${i==="curl"?"bg-gray-100 text-gray-900":"text-gray-600"}`,children:"cURL"}),e.jsx("button",{onClick:()=>r("js"),className:`px-2 py-1 rounded ${i==="js"?"bg-gray-100 text-gray-900":"text-gray-600"}`,children:"JavaScript"})]}),i==="curl"?e.jsx(P,{text:t,wrap:n}):e.jsx(P,{text:s,wrap:n})]})}function ie({method:t}){const n={GET:"bg-emerald-50 text-emerald-700 ring-emerald-200",POST:"bg-blue-50 text-blue-700 ring-blue-200",PUT:"bg-amber-50 text-amber-700 ring-amber-200",PATCH:"bg-cyan-50 text-cyan-700 ring-cyan-200",DELETE:"bg-rose-50 text-rose-700 ring-rose-200"}[t]||"bg-gray-100 text-gray-700 ring-gray-200";return e.jsx("span",{className:`pill ${n} min-w-[54px] text-center`,children:t})}function ce({params:t}){const s={path:[],query:[],header:[],cookie:[],body:[]};for(const i of t){const r=(i.in||"other").toLowerCase();s[r]||(s[r]=[]),s[r].push(i)}const n=["path","query","header","cookie"];return e.jsx("div",{className:"space-y-3",children:n.map(i=>s[i]&&s[i].length?e.jsxs("div",{children:[e.jsxs("div",{className:"text-[11px] font-medium text-gray-500 mb-1",children:[i.charAt(0).toUpperCase()+i.slice(1)," parameters"]}),e.jsx("ul",{className:"space-y-1",children:s[i].map(r=>{const c=r.schema||{},d=c.type||(c.$ref?U(c.$ref):r.type||""),u=[];(c.default!==void 0||r.default!==void 0)&&u.push(`default: ${c.default??r.default}`),c.enum&&u.push(`enum: ${(c.enum||[]).join(", ")}`);const f=[r.description,...u].filter(Boolean).join(" — ");return e.jsxs("li",{className:"text-xs text-gray-700",children:[e.jsxs("span",{className:"inline-flex items-center gap-1",children:[e.jsx("code",{className:"px-1 py-0.5 rounded bg-gray-100 border border-gray-200 text-gray-900",children:r.name}),e.jsx("span",{className:"text-gray-500",children:d}),r.required&&e.jsx("span",{className:"text-gray-500",children:"• required"})]}),f&&e.jsxs("span",{className:"text-gray-600",children:[" — ",f]})]},`${r.name}-${r.in}`)})})]},i):null)})}function oe(t){return t.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"")}function U(t){const s=t.match(/#\/components\/(schemas|requestBodies)\/(.+)$/);return s?s[2]:t}function Y(t,s){var i,r;if(!t||!t.$ref)return t;const n=U(t.$ref);return((i=s==null?void 0:s.schemas)==null?void 0:i[n])||((r=s==null?void 0:s.requestBodies)==null?void 0:r[n])||t}function le(t,s){if(t)return t.$ref?Y(t,s.components):t}function de(t){if(!(t!=null&&t.parameters))return;const s=t.parameters.find(n=>n.in==="body");if(s)return{content:{"application/json":{schema:s.schema||{}}}}}function O(t,s,n=0,i=new Set){if(!t)return"";if(n>8)return"…";if(t.example!==void 0)return t.example;if(t.$ref){const c=t.$ref,d=U(c);return i.has(d)?`{circular:${d}}`:(i.add(d),O(Y(t,s),s,n+1,i))}const r=t.type;if(t.examples&&Array.isArray(t.examples)&&t.examples.length)return t.examples[0];if(r==="object"||t.properties&&typeof t.properties=="object"){const c={},d=t.properties||{};let u=0;for(const[f,m]of Object.entries(d))if(c[f]=O(m,s,n+1,new Set(i)),++u>15)break;return c}if(r==="array")return[O(t.items||{},s,n+1,new Set(i))];if(t.enum&&Array.isArray(t.enum))return t.enum[0];switch(r){case"integer":case"number":return 123;case"boolean":return!0;case"string":default:return(t==null?void 0:t.format)==="date-time"?new Date().toISOString():"string"}}function L(t){if(typeof t=="string")return t;try{return JSON.stringify(t,null,2)}catch{return String(t)}}function me(t,s,n,i,r,c){const d=typeof window<"u"?window.location.origin:"http://localhost:8080",u=(c||[]).filter(x=>x.in==="query"),f=t==="GET"&&u.length?"?"+u.map(x=>`${encodeURIComponent(x.name)}=${encodeURIComponent(ge(x))}`).join("&"):"",m=`${d}${s}${f}`,N=["curl","-X",t,`'${m}'`];if(r&&r.length)for(const x of r)N.push("-H",`'${x}'`);return n&&N.push("-H",`'Content-Type: ${n}'`),i!==void 0&&N.push("-d",`'${JSON.stringify(i)}'`),N.join(" ")}function I(t){try{const s=t.match(/-X\s+(GET|POST|PUT|PATCH|DELETE)/i),n=t.match(/'https?:[^']+'/),i=/-H\s+'([^']+)'/g,r=t.match(/-d\s+'([^']+)'/),c=s?s[1].toUpperCase():"GET",d=n?n[0].slice(1,-1):"",u={};let f;for(;(f=i.exec(t))!==null;){const[x,...T]=f[1].split(":"),$=T.join(":").trim();u[x.trim()]=$}const m=r?r[1]:void 0;return[`const res = await fetch('${d}', {`,`  method: '${c}',`,Object.keys(u).length?`  headers: ${JSON.stringify(u,null,2).replace(/\n/g,`
  `).replace(/^/gm,"  ")},`:"",m?`  body: ${xe(m)?`JSON.stringify(${he(m)})`:`'${m}'`},`:"","});","const data = await res.json();","console.log(data);"].filter(Boolean).join(`
`)}catch{return`// Could not convert to fetch.
// Original:
${t}`}}function xe(t){try{return JSON.parse(t),!0}catch{return!1}}function he(t){try{return JSON.parse(t)}catch{return t}}function ue(t,s={}){var i;if(!t||!s[t])return[];const n=s[t];if(n.type==="apiKey"){const r=n.name||((i=n.description)!=null&&i.includes("Authorization")?"Authorization":"X-API-Key");return r.toLowerCase()==="authorization"?["Authorization: Bearer YOUR_JWT"]:[`${r}: YOUR_API_KEY`]}return n.type==="http"&&n.scheme==="bearer"?["Authorization: Bearer YOUR_JWT"]:[]}function pe({name:t,def:s}){const n=s?s.type==="apiKey"?s.name==="Authorization"?"Bearer token":`${s.name} header`:s.type==="http"&&s.scheme==="bearer"?"Bearer token":t:t;return e.jsx("span",{className:"inline-flex items-center gap-1 rounded-full bg-gray-200 text-gray-800 px-2 py-0.5",children:n})}function ge(t){const s=t.schema||{};if(t.example!==void 0)return t.example;if(s.example!==void 0)return s.example;if(s.default!==void 0)return s.default;if(s.enum&&s.enum.length)return s.enum[0];switch(s.type||t.type){case"integer":case"number":return 1;case"boolean":return!0;case"string":default:return"value"}}const fe=ee(document.getElementById("root"));fe.render(e.jsx(te.StrictMode,{children:e.jsx(se,{})}));
